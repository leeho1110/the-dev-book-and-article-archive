# 오브젝트 PART 10 - 상속과 코드 재사용

### DRY (Don’t Repeat Yourself)원칙

신뢰할 수 있고 수정하기 쉬운 소프트웨어를 만드는 효과적인 방법 중 하나는 중복을 제거하는 것이다. 비즈니스 모델을 만드는 데에 필요한 동일한 지식을 중복하지 말라는 것이다.

중복 코드는 새로운 중복 코드를 부른다. 중복 코드가 늘어날수록 애플리케이션은 변경에 취약해지고 버그가 발생할 가능성이 높아진다. 기회가 생길 때마다 코드를 DRY하게 만들기 위해 노력하라.

---

### 취약한 기반 클래스 문제

부모 클래스의 변경에 의해 자식 클래스가 영향을 받는 현상을 **취약한 기반 클래스 문제(Fragile Base Class Problem)** 라고 부른다.코드 재사용을 목적으로 상속을 사용할 때 발생하는 가장 대표적인 문제다. 이 문제는 상속을 사용한다면 피할 수 없는 객체지향 프로그래밍의 근본적인 취약성이다.

이 문제는 캡슐화를 약화시키고 결합도를 높인다.  상속 관계를 추가할수록 전체 시스템의 결합도는 높아진다. 물론 자식 클래스를 점진적으로 추가하여 기능을 확장하는 데에는 용이하지만 높은 결합도로 인해 부모 클래스를 점진적으로 개선하는 것은 어렵게 만든다. 

---

### 불필요한 인터페이스 상속 문제

자바의 초기 버전에서 상속을 잘못 사용한 대표적인 사례는 `java.util.Properties`와 `java.util.Stack`이다. 문제점은 부모 클래스에서 상속받은 메서드를 사용할 경우 자식 클래스의 규칙이 위반될 수 있다는 것이다. 

***Stack***의 경우LIFO 자료구조인데 ***Vector***클래스를 상속받으며 퍼블릭 인터페이스까지 합쳐져 임의의 위치에 값을 할당할 수 있는 *add()* 메서드까지 사용할 수 있게 되버렸다. 

***Properties***의 경우  String 자료형으로 된 key,value 쌍만 보관할 수 있다. 하지만 ***Hasttable*** 클래스를 상속하여 key,value에 ***Object*** 클래스를 삽입할 수 있는 *put()* 메서드를 물려받아 ***Object*** 타입을 삽입할 수 있게 되었다.

위 예시는 퍼블릭 인터페이스에 대한 고려 없이 단순히 코드 재사용을 위해 상속을 이용하는 것이 얼마나 위험한지를 보여준다. 

---

### 차이에 의한 프로그래밍

가장 먼저 할 일은 중복 코드 안에서 차이점을 별도의 메서드로 추출하는 것이다. 상속을 사용하면 이미 존재하는 클래스의 코드를 기반으로 다른 부분을 구현함으로써 새로운 기능을 쉽고 빠르게 추가할 수 있다. 

이처럼 기존 코드와 다른 부분만을 추가함으로써 애플리케이션의 기능을 확장하는 방법을 **차이에 의한 프로그래밍** 이라고 부른다.