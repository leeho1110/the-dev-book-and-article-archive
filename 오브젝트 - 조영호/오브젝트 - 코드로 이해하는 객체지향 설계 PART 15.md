# 오브젝트 PART 15 - 디자인 패턴과 프레임워크

우리는 애플리케이션을 설계하며 어떤 요구사항들을 해결한다. 그리고 이 때 대부분은 문제에 부딪히며  해결 방법들을 찾고 그 히스토리들은 쌓여간다. 소프트웨어 세계에서는 이런 공통적인 문제에 대해 해결 가능한 방법들을 종합하여 쉽게 해결할 수 있는 설계도를 만들어 놓았다. 그리고 우린 그것을 디자인 패턴이라고 한다.

우린 디자인 패턴을 통해 설계도를 재사용할 수 있다. 만약 코드도 재사용하고 싶다면 어떻게 해야할까. 이 때는 프레임워크를 사용하면 된다. 프레임워크는 애플리케이션의 아키텍처(설계도)를 구현 코드의 형태로 제공한다. 프레임워크가 우리가 구현하고자 하는 요구사항과 비슷하다면 우린 단번에 견고한 구현 코드를 재사용할 수 있는 것이다.

---

### 소프트웨어 패턴

위에서 말한 패턴의 장점은 오랜 시간 쌓여온 경험치를 압축했다는 것에 높은 가치에 있다고 볼 수 있다. 실무 경험이 적은 사람이라도 경험치가 응축된 포션(패턴)에 도움을 받을 수 있는 것이다. 

그렇다면 패턴은 어떻게 구성되었고 어떻게 만들어졌길래 이렇게 큰 도움이 되는 것일까. 답은 역시 객체지향 패러다임과 관련되어있다. 패턴의 구성 요소는 클래스가 아니라 ‘역할'이다. 클래스와 메서드가 아닌 역할과 책임이라는 것을 명심하자.

하지만 맹목적인 패턴의 사용은 부작용을 불러온다. 패턴은 오랜 시간 반복된 문제를 해결하기 위해 탄생했다. 즉 문제를 우선 해결하려는 것이 먼저다. 이 문제를 어떻게 해결할까를 고민하다가 적합한 패턴을 찾는 것이지, 타당한 이유 없이 문제를 해결하기 위해 이 패턴을 써는 것은 틀리다.

---

### 프레임워크와 코드 재사용

가장 이상적인 재사용 방법은 무엇일까? 디자인 패턴일까? 설계 아이디어를 언어 특성에 맞춰 가공하고 내부 구현을 매번 재작성해야 하는 불편함이 있다. 부품처럼 규격화된 컴포넌트일까? 코드만 재사용하는 것은 도메인 다양성에 가로막혀 현실적인 해결책이 불가능하다. 결국 정답은 프레임워크다.

프레임워크는 핵심을 집어낸다. 본문에서는 코드를 재사용함으로써 설계 아이디어를 재사용한다고 표현했다. 디자인 패턴가 컴포넌트가 갖고 있는 각각의 문제점을 프레임워크는 해결했다.

애플리케이션에 대한 아키텍처를 재공함으로써 설계 아이디어, 큰 틀을 제공하며 클래스나 객체 분할, 전체 구조, 객체 간의 상호작용, 제어 흐름 등을 미리 정의하여 사용자에게 건네준다. 따라서 우리는 맞닥뜨린 요구사항(비즈니스 로직으로 이해했다)만 설계하 나머지는 프레임워크에 맡기면 되는 것이다. 

그렇다면 프레임워크는 어떻게 저 문제를 해결해 강력해진 것일까. 역시 답은 추상화를 통한 의존성 역전 원리다. 이전에 얘기했던 내용(***Movie → AmountDiscountPolicy-구체적인 방법에 의존 / DiscountPolicy-추상화에 의존***)을 기억하는가. 절차지향으로 작성되었던 프로그램들의 의존성은 상위 정책이 구체적 세부사항으로 흐른다. 하지만 추상화를 의존하게 되면 자연스레 의존성은 상위 정책 방향으로 조정된다. 이를 통해 우린 변경에 유연하고 협력 흐름을 재사용할 수 있었다.

물론 처음 프레임워크를 처음 사용하게 되면 높은 추상화에 의해 이해하기 어려울수도 있다. 하지만 우리는 변경에 유연하고 구현에 집중할 수 있게 된다. 잊지말자. 추상화가 이 모든 혜택의 핵심이라는 것을.