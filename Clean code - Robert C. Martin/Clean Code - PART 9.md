# Clean Code - Robert C. Martin : PART 9

### PART 9 : 단위 테스트

지금의 우리 분야는 애자일과 TDD 덕택에 단위 테스트를 자동화하는 프로그래머들이 이미 많아졌고, 점점 늘어나는 추세이다. 하지만 급하게 서두르는 와중에 제대로 된 테스트 케이스를 작성해야 한다는 중요한 사실을 놓쳐버렸다.

1. TDD 법칙 세 가지
    1. **첫째 법칙 :** 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.
    2. **둘째 법칙 :** 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다.
    3. **셋째 법칙 :** 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.

2. 깨끗한 테스트 코드 유지하기
    1. 테스트 코드를 최초에 지저분하고 더럽게 짜는 것을 절대 절대 피하라. 테스트 코드는 실제 코드 못지 않게 중요하다. 실제 코드 못지 않게 깨끗하게 짜야 한다.
    2. 테스트는 유연성, 유지보수성, 재사용성을 제공한다.
        1. 테스트 코드를 깨끗하게 유지하지 않으면 결국은 잃어버린다.
        2. 위 세가지 장점을 제공하는 버팀목이 바로 단위 테스트이다.
3. 깨끗한 테스트 코드
    1. 가독성이 무엇보다 중요하다.
    2.  `BUILD-OPERATE-CHECK (GIVEN - WHEN - THEN)` , 잡다하고 세세한 코드는 다 없애고 진짜 필요한 자료 유형과 함수만 사용한다.
    3. 때로는 도메인에 특화된 테스트 언어를 사용하는 것이 좋을 때도 있다.
4. 테스트 당 `assert` 하나
    1. 단일 `assert` 문은 훌륭하다. 하지만 때로는 주저없이 함수 하나에 `assert` 문을 넣을줄도 알아야 한다. 단지 `assert`문은 최대한 줄이는게 좋으니, **개념 당 assert 문 수를 최소로 줄여라**
    2. 테스트 함수마다 하나의 개념만 테스트하라
5. F.I.R.S.T (깨끗한 테스트 코드가 따르는 규칙)
    1. **Fast** : 테스트는 빨리 돌아야한다. 테스트가 느리다면 자주 돌릴 엄두를 못내게 되고, 자주 돌리지 않으면 초반에 문제를 찾아내 고치지 못한다. 따라서 코드를 마음껏 정리하지도 못한다.
    2. **Independent :** 테스트에는 서로 의존성이 있어선 안된다. 테스트는 독립적으로 어떤 순서로 실행해도 괜찮아야 한다.
    3. **Repetable :** 어떤 환경에서도 반복 가능해야 한다. 운영 환경, QA 환경, 네트워크가 연결되지 않더라도 실행할 수 있어야 한다.
    4. **Self-Validating** : 테스트는 boolean 값으로 결과를 내야 한다. 성공, 실패 둘 중 하나이다. 
    5. **Timeley :** 테스트는 적시에 작성되어야 한다. 단위 테스트는 테스트하려는 실제 코드를 구현하기 직전에 구현한다. 
        1. 테스트 코드는 구현하고자 하는 프로덕트 코드를 위한 지침서이다. 어떤 기능을 구현할 것인지 기능들을 명시하는 역할을 해야한다.
